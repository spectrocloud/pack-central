# Copyright 2025 NVIDIA CORPORATION
# SPDX-License-Identifier: Apache-2.0

global:
  registry: ghcr.io/nvidia/kai-scheduler
  tag: ""
  imagePullPolicy: IfNotPresent
  securityContext: {}
  imagePullSecrets: []
  leaderElection: false
  gpuSharing: false
  clusterAutoscaling: false
  nodeSelector: {}
  affinity: {}
  requireDefaultPodAntiAffinityTerm: false
  tolerations: []
  namespaceLabelSelector: {}
  podLabelSelector: {}
  resourceReservation:
    namespace: kai-resource-reservation
    serviceAccount: kai-resource-reservation
    appLabel: kai-resource-reservation

operator:
  image:
    name: operator
    pullPolicy: IfNotPresent
    # tag: ""  # Optional: Override global.tag or Chart.AppVersion
  replicaCount: 1
  metricsBindAddress: ":8080"
  probeBindAddress: ":8081"
  qps: 50
  burst: 300

podgrouper:
  image:
    name: podgrouper
    pullPolicy: IfNotPresent
    # tag: ""  # Optional: Override global.tag or Chart.AppVersion
  queueLabelKey: "kai.scheduler/queue"
  affinity: {}

podgroupcontroller:
  image:
    name: podgroupcontroller
    pullPolicy: IfNotPresent
    # tag: ""  # Optional: Override global.tag or Chart.AppVersion
  affinity: {}
binder:
  name: binder
  image:
    name: binder
    pullPolicy: IfNotPresent
    # tag: ""  # Optional: Override global.tag or Chart.AppVersion
  resourceReservationImage:
    name: resourcereservation
    # tag: ""  # Optional: Override global.tag or Chart.AppVersion
  # resourceReservationPodResources specifies CPU and memory resource requests and limits
  # for GPU reservation pods created by the binder.
  # If not specified, Kubernetes default behavior will be used (no explicit limits/requests for CPU/Memory).
  # Example:
  # resourceReservationPodResources:
  #   requests:
  #     cpu: 1m
  #     memory: 10Mi
  #   limits:
  #     cpu: 50m
  #     memory: 100Mi
  ports:
    metricsPort: 8080
  affinity: {}
scheduler:
  image:
    name: scheduler
    pullPolicy: IfNotPresent
    # tag: ""  # Optional: Override global.tag or Chart.AppVersion
  placementStrategy: binpack
  ports:
    metricsPort: 8080

queuecontroller:
  image:
    name: queuecontroller
    pullPolicy: IfNotPresent
    # tag: ""  # Optional: Override global.tag or Chart.AppVersion
  certSecretName: queuecontroller-webhook-tls-secret
  affinity: {}

admission:
  name: kai-admission
  image:
    name: admission
    pullPolicy: IfNotPresent
    # tag: ""  # Optional: Override global.tag or Chart.AppVersion
  certSecretName: admission-webhook-tls-secret
  ports:
    webhookPort: 9443
    metricsPort: 8080
    probePort: 8081
  cdi: false
  gpuPodRuntimeClassName: nvidia
  affinity: {}

nodescaleadjuster:
  image:
    name: nodescaleadjuster
    pullPolicy: IfNotPresent
    # tag: ""  # Optional: Override global.tag or Chart.AppVersion
  scalingPodImage:
    name: scalingpod
    pullPolicy: IfNotPresent
    # tag: ""  # Optional: Override global.tag or Chart.AppVersion
  scalingPodNamespace: kai-scale-adjust
  affinity: {}

crdupgrader:
  image:
    name: crd-upgrader
    pullPolicy: IfNotPresent
    # tag: ""  # Optional: Override global.tag or Chart.AppVersion

defaultQueue:
  createDefaultQueue: true
  parentName: default-parent-queue
  childName: default-queue
  parentResources:
    cpu:
      quota: 0
      limit: -1
      overQuotaWeight: 1
    gpu:
      quota: 0
      limit: -1
      overQuotaWeight: 1
    memory:
      quota: 0
      limit: -1
      overQuotaWeight: 1
  childResources:
    cpu:
      quota: 0
      limit: -1
      overQuotaWeight: 1
    gpu:
      quota: 0
      limit: -1
      overQuotaWeight: 1
    memory:
      quota: 0
      limit: -1
      overQuotaWeight: 1