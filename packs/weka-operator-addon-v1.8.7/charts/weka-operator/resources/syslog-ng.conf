@version: 3.35

options {
    use_dns(no);
    dns_cache(no);
    keep_hostname(yes);
    create_dirs(yes);
    ts_format(iso);
};

source s_net {
    unix-stream("/var/run/syslog-ng/syslog-ng.sock");
    unix-dgram("/run/systemd/journal/dev-log", create_dirs(yes));
};

destination d_stdout {
    file("/dev/stdout"
        template("$ISODATE $MSGHDR | $MSG\n")
    );
};

destination d_syslog {
    file("/var/log/syslog"
        template("$ISODATE $MSGHDR | $MSG\n")
        template_escape(no)
    );
};

destination d_error {
    file("/var/log/error"
        template("$ISODATE $MSGHDR | $MSG\n")
        template_escape(no)
    );
};

filter f_info {
    match(".*(NOTICE|WARN(ING)*|ERR(OR)*|CRIT(ICAL)*|ALERT|EMERG(ENCY)*|FATAL|ASSERT):.*" value("MESSAGE"));
};

filter f_error {
    match(".*(ERR(OR)*|CRIT(ICAL)*|ALERT|EMERG(ENCY)*|FATAL|ASSERT):.*" value("MESSAGE"));
};

log {
    source(s_net);
    filter(f_info);
    destination(d_stdout);
};

log {
    source(s_net);
    destination(d_syslog);
};

log {
    source(s_net);
    filter(f_error);
    destination(d_error);
};

